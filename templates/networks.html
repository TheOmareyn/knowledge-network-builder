<!-- csslint-disable -->
{% extends 'base.html' %}

{% block title %}My Networks - Knowledge Network Builder{% endblock %}

{% block content %}
<h2>üìö My Knowledge Networks</h2>

<section class="documents-section" style="margin-top:30px;">
    {% set processed_docs = documents|selectattr('has_network', 'equalto', true)|list %}
    {% if processed_docs and processed_docs|length > 0 %}
    <div style="display:grid; gap:15px;">
        {% for doc in processed_docs %}
        <div style="border:1px solid #ddd; border-radius:8px; padding:15px; background:#fff; box-shadow:0 2px 4px rgba(0,0,0,0.1); transition:box-shadow 0.3s, transform 0.3s;" onmouseover="this.style.boxShadow='0 4px 8px rgba(0,0,0,0.15)'; this.style.transform='translateY(-2px)';" onmouseout="this.style.boxShadow='0 2px 4px rgba(0,0,0,0.1)'; this.style.transform='translateY(0)';">
            <div style="display:flex; justify-content:space-between; align-items:start; gap:15px;">
                <div style="flex:1;">
                    <h4 style="margin:0 0 8px 0; color:#2196F3; font-size:1.1em;">
                        {{ doc.title or 'Untitled' }}
                        {% if doc.is_private %}
                        <span style="background:#FFD700; color:#000; padding:2px 6px; border-radius:3px; font-size:0.7em; margin-left:8px;">üîí PRIVATE</span>
                        {% endif %}
                    </h4>
                    <div style="color:#666; font-size:0.9em; margin-bottom:10px;">
                        <strong>{{ doc.author or 'Unknown Author' }}</strong>
                        {% if doc.year %} ({{ doc.year }}){% endif %}
                    </div>
                    
                    <div style="display:flex; gap:20px; flex-wrap:wrap; font-size:0.85em; color:#555;">
                        {% if doc.publication_type %}
                        <div>
                            <span style="background:#e3f2fd; padding:2px 8px; border-radius:3px; color:#1976d2; font-weight:500;">
                                {{ doc.publication_type|title }}
                            </span>
                        </div>
                        {% endif %}
                        
                        {% if doc.journal %}
                        <div><strong>Journal:</strong> {{ doc.journal }}</div>
                        {% elif doc.publisher %}
                        <div><strong>Publisher:</strong> {{ doc.publisher }}</div>
                        {% endif %}
                        
                        {% if doc.volume or doc.number or doc.pages %}
                        <div>
                            {% if doc.volume %}<strong>Vol.</strong> {{ doc.volume }}{% endif %}
                            {% if doc.number %}(<strong>No.</strong> {{ doc.number }}){% endif %}
                            {% if doc.pages %}: {{ doc.pages }}{% endif %}
                        </div>
                        {% endif %}
                    </div>
                    
                    <div style="margin-top:8px; font-size:0.8em; color:#999;">
                        Uploaded: {{ doc.upload_timestamp }}
                    </div>
                </div>
                
                <div style="flex-shrink:0;">
                    <a class="btn btn-primary" href="{{ url_for('network.view_network', document_id=doc.id) }}" style="white-space:nowrap; padding:10px 20px; font-weight:500;">
                        üîç View Network
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
        <div style="text-align:center; padding:40px; background:#f5f5f5; border-radius:8px; color:#666;">
            <p style="font-size:1.1em; margin:0;">üìÑ No processed networks yet.</p>
            <p style="margin:10px 0 0 0; font-size:0.9em;">Upload a PDF and process it to create your first knowledge network.</p>
            <a href="{{ url_for('document.upload_page') }}" class="btn btn-primary" style="margin-top:15px; display:inline-block;">
                üì§ Upload PDF
            </a>
        </div>
    {% endif %}
</section>
{% endblock %}
